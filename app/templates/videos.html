{% extends "base.html" %}
{% block content %}

<span class="section-label fade-up fade-up-1"><i class="bi bi-play-circle me-1"></i>Contenido</span>
<h2 class="neon-text mb-4 fade-up fade-up-1">Buscar Videos</h2>

<!-- Search form -->
<form method="GET" class="mb-5 fade-up fade-up-2">
    <div class="d-flex gap-2">
        <input type="text" name="q" value="{{ query }}"
               class="form-control"
               placeholder="Ej: Bitcoin 2025, DeFi, trading cripto...">
        <button class="btn-purple btn" type="submit">
            <i class="bi bi-search me-1"></i>Buscar
        </button>
    </div>
</form>

<!-- Results -->
<div class="row g-4 fade-up fade-up-3">

{% if videos %}
    {% for video in videos %}
    <div class="col-md-4 mb-2">
        <div class="card h-100">
            <img src="{{ video.snippet.thumbnails.medium.url }}"
                 class="card-img-top"
                 alt="{{ video.snippet.title }}">

            <div class="card-body p-3">
                <p style="font-size:0.75rem; color:var(--text-muted); margin-bottom:0.4rem;">
                    <i class="bi bi-calendar3 me-1"></i>{{ video.snippet.publishedAt[:10] }}
                </p>
                <h6 style="font-size:0.9rem; line-height:1.45;">{{ video.snippet.title }}</h6>
                <a href="https://www.youtube.com/watch?v={{ video.id.videoId }}"
                   target="_blank" rel="noopener"
                   class="btn btn-outline-info btn-sm mt-2">
                    <i class="bi bi-youtube me-1"></i>Ver en YouTube
                </a>
            </div>
        </div>
    </div>
    {% endfor %}
{% else %}
    <div class="col-12">
        <div class="guide-card">
            <p>
                <i class="bi bi-search me-2"></i>
                {% if query %}
                    No se encontraron videos para <strong style="color:var(--purple-light);">"{{ query }}"</strong>. Intenta con otro t√©rmino.
                {% else %}
                    Usa el buscador para encontrar videos sobre criptomonedas.
                {% endif %}
            </p>
        </div>
    </div>
{% endif %}

</div>

{% endblock %}